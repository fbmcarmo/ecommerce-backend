generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model avaliacoes {
  id         Int      @id @default(autoincrement())
  nota       BigInt
  descricao  String?  @db.VarChar(255)
  usuario_id Int
  produto_id Int
  usuarios   usuarios @relation(fields: [usuario_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "avaliacoes_fk3")
  produtos   produtos @relation(fields: [produto_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "avaliacoes_fk4")
}

model banner {
  id         Int      @id @default(autoincrement())
  url_banner String   @db.VarChar(255)
  validade   DateTime @db.Date
  link       String?  @db.VarChar(255)
}

model categoria {
  id       Int        @id @default(autoincrement())
  nome     String     @db.VarChar(50)
  produtos produtos[]
}

model cupons {
  id         Int       @id @default(autoincrement())
  nome       String    @db.VarChar(50)
  quantidade BigInt
  validade   DateTime  @db.Date
  valor_desc BigInt    @default(0)
  pedidos    pedidos[]
}

model pedido_produto {
  id         Int      @id @default(autoincrement())
  id_produto Int
  id_pedido  Int
  produtos   produtos @relation(fields: [id_produto], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "pedido_produto_fk1")
  pedidos    pedidos  @relation(fields: [id_pedido], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "pedido_produto_fk2")
}

model pedidos {
  id               Int              @id @default(autoincrement())
  usuario_id       Int
  status           String           @db.VarChar(255)
  valor_total      String           @db.VarChar(255)
  valor_desc       String           @default("0") @db.VarChar(255)
  logradouro       String           @db.VarChar(255)
  numero           String           @db.VarChar(255)
  complemento      String?          @db.VarChar(255)
  bairro           String           @db.VarChar(255)
  cidade           String           @db.VarChar(255)
  estado           String           @db.VarChar(255)
  cep              String           @db.VarChar(255)
  cod_rastreio     String?          @db.VarChar(100)
  previsao_entrega DateTime         @db.Date
  cupom_id         Int?          @default(0)
  pedido_produto   pedido_produto[]
  usuarios         usuarios         @relation(fields: [usuario_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "pedidos_fk1")
  cupons           cupons?          @relation(fields: [cupom_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "pedidos_fk14")
}

model produto_imagens {
  id         Int      @id @default(autoincrement())
  url        String   @db.VarChar(255)
  produto_id Int
  produtos   produtos @relation(fields: [produto_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "produto_imagens_fk2")
}

model produtos {
  id              Int               @id @default(autoincrement())
  nome            String            @db.VarChar(255)
  valor           String            @db.VarChar(255)
  descricao       String            @db.VarChar(255)
  desconto        BigInt?           @default(0)
  estoque         BigInt
  categoria_id    Int
  tamanhos        String            @db.VarChar(255)
  cores           String            @db.VarChar(255)
  altura          String            @db.VarChar(255)
  largura         String            @db.VarChar(255)
  comprimento     String            @db.VarChar(255)
  peso            String            @db.VarChar(255)
  avaliacoes      avaliacoes[]
  pedido_produto  pedido_produto[]
  produto_imagens produto_imagens[]
  categoria       categoria         @relation(fields: [categoria_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "produtos_fk6")
}

model tamanhos {
  id   Int    @id @default(autoincrement())
  nome String @db.VarChar(255)
}

model usuarios {
  id         Int          @id @default(autoincrement())
  nome       String       @db.VarChar(50)
  genero     String       @db.VarChar(15)
  cpf        String       @unique @db.VarChar(11)
  email      String       @unique @db.VarChar(50)
  telefone   String       @db.VarChar(255)
  senha      String       @db.VarChar(255)
  nivel      String       @default("cliente") @db.VarChar(10)
  data_nasc  DateTime     @db.Date
  avaliacoes avaliacoes[]
  pedidos    pedidos[]
}
